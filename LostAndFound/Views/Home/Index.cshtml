@model IEnumerable<LostAndFound.Models.Find>

@{
    ViewBag.Title = "Index";
}
<link href="~/trial/style.css" rel="stylesheet" />
<link href="~/Scripts/product-quick-view-master/css/css.css" rel="stylesheet" />
<link href="~/Scripts/product-quick-view-master/css/reset.css" rel="stylesheet" />
<link href="~/Scripts/product-quick-view-master/css/style.css" rel="stylesheet" />
<script src="js/modernizr.js"></script>
<script src="~/Scripts/product-quick-view-master/js/jquery-2.1.1.js"></script>
<script src="~/Scripts/product-quick-view-master/js/velocity.min.js"></script>
<script src="~/Scripts/product-quick-view-master/js/main.js"></script>

<script>
    $(document).ready(function () {
    dateDefaultValues = function () {
        year = @DateTime.Now.Year;
        month = @DateTime.Now.Month;
        if (month < 10)
            month = '0' + month;
        day = @DateTime.Now.Day;
        if (day < 10)
            day = '0' + day;
        date = year + "-" + month + "-" + day;

        $("#dateNow").val(date);

        date = (year - 1) + "-" + month + "-" + day;
        $("#fromDate").val(date);
    }
    dateDefaultValues();

    $("#category").change(function () {
        $("#hiddenMainCategory").val($("#category").val());
        $("#categoryForm").submit();
    });
    var theAllOption = ($("<option>הכל</option>"));
    $("#categoryForm").submit(function (event) {
        event.preventDefault();
        var target = $(this);

        $.ajax({
            url: target.attr("action"),
            data: target.serialize(),
            success: function (data) {

                $("#subCategories").empty().append(theAllOption);
                $.each(data, function (i, value) {
                    $("#subCategories").append($("<option>" + JSON.stringify(value).split('"')[1] + "</option>"));
                });
            }


        });
            });
   });
</script>
@*<img src="~/trial/image.png" id="background" alt="רקע לא נמצא" />*@
<img src="~/icons/432.jpg"  id="background" alt="רקע לא נמצא"/>
<p>
    @Html.ActionLink("הוסף מציאה", "CreateFind")
</p>
<div class="row">
    <div id="container1" class="containerx col-md-4">
        <img style="height:25px" src="~/trial/email.ico" />
        <form id="categoryForm" action="@Url.Action("Index", "Home")" style="display:inline-block">
            <select id="category" name="category" class="input1">
                <option>בחר קטגוריה</option>
                @foreach (var item in ViewBag.category)
                {
                    <option>@item.Name</option>
                }
            </select>
        </form>
        @using (Ajax.BeginForm("SearchFinds", new AjaxOptions()
        {
            UpdateTargetId = "updateTable",
            HttpMethod = "GET",
            InsertionMode = InsertionMode.Replace

        }))
        {
            <img style="height:25px" src="~/trial/email.ico" />

            <input id="hiddenMainCategory" name="hiddenCategory" hidden="hidden" value="הכל" />
            <select id="subCategories" name="subCategory" class="input1">
                <option>בחר תת קטגוריה</option>
                @if (Model != null)
                {
                    foreach (var item in Model)
                    {
                        <option>@item</option>
                    }

                }
            </select>
            <img style="height:25px" src="~/trial/email.ico" />
            <select id="place" name="place" class="input1">
                <option>בחר מקום</option>
                @foreach (var item in ViewBag.place)
                {
                    <option>@item.PlaceOrEvent</option>
                }
            </select>
            <img style="height:25px" src="~/trial/email.ico" />
            <input id="fromDate" type="date" name="fromDate" class="input1" />
            <input id="dateNow" type="date" name="toDate" class="input1" />
            <img style="height:25px" src="~/trial/email.ico" />
            <input type="text" placeholder="טקסט חופשי" name="text" class="input1" />
            <img style="height:25px" src="~/trial/email.ico" />
            <div class="row"><input type="checkbox" id="searchArchive" name="searchArchive" value="true" class=" col-md-4" /><label class="col-md-4">חיפוש בארכיון</label></div>
            <input type="submit" class="input1" value="סנן" />

        }
    </div>
    <div id="updateTable" class="col-md-8">

        <ul class="cd-items cd-container card">
            @foreach (var item in ViewBag.tbl)
            {

                <li class="cd-item">
                    <div class="cd-item-img-container">
                        <img src="@Url.Content(@item.picture)" alt="Item Preview" />
                    </div>
                    <div style="background-color:ghostwhite">
                        <h4 class="card-title">@item.subcategoryname</h4>
                        <div>@item.subcategoryname</div>
                        <div>@item.description</div>
                    </div>
                    <a href="#0" class="cd-trigger">Quick View</a>
                </li>
            }
        </ul>
        <div class="cd-quick-view">
            <div class="cd-slider-wrapper">
                <ul class="cd-slider">
                    <li class="selected">
                        @*<img src="@item.picture" alt="Item Preview" />*@
                    </li>


                </ul> <!-- cd-slider -->

                <ul class="cd-slider-navigation">
                    <li><a class="cd-next" href="#0">Prev</a></li>
                    <li><a class="cd-prev" href="#0">Next</a></li>
                </ul> <!-- cd-slider-navigation -->
            </div> <!-- cd-slider-wrapper -->

            <div class="cd-item-info">

            </div> <!-- cd-item-info -->
            <a href="#0" class="cd-close">Close</a>
        </div>
    </div>
</div>

